<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/darcula.min.css">


    <title>Document</title>
</head>

<body ng-app="adaptivetests">

    <div class="container-fluid">
        <div class="row">
            <div class="col-md-3"></div>
            <div class="col-md-6">
                <all-tests></all-tests>
            </div>
            <div class="col-md-3"></div>
        </div>        
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.0/angular.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>

    <script src="tests.js"></script>


    <script>

        hljs.initHighlightingOnLoad();

        tests.forEach(test => {
            test.contents = test.contentLines.join("\n");
        });
        
        var allTestsTemplate = `<single-test test="$ctrl.currentTest"></single-test>`

        angular.module('adaptivetests', [])
            .directive('singleTest', function(){
                return {
                    templateUrl: 'templates/singleTest.html',
                    scope:{
                        'test': '<'
                    },
                    controller: function($scope){
                    
                        var answeredCorrectly = null;
                        $scope.processChoice = function(event){
                            answeredCorrectly = event.target.innerText === $scope.test.answer;
                        }

                        $scope.wasAnswerGiven = () => answeredCorrectly !== null;

                        $scope.wasCorrectAnswer = () => answeredCorrectly;   
                    }
                }
            })
            .component('allTests', {
                template: allTestsTemplate, 
                controller: function(){
                    this.currentTest = tests[1];
                }
            });

/*
document.addEventListener("DOMContentLoaded", ready);

function ready(){
    
    console.log(tests);


}
*/


    </script>


</body>

</html>